import IO;
import List;
import Strings;

export class Test:

static doNothing <T1> (t: T1) -> T1 {
    alsoT: T1 = t;
    return alsoT;
}

static call <R2,T2,S2> (f: (T2,S2->R2), t: T2, s: S2) -> R2 {
    return f(t, s);
}

static call2 <R3,T3> (f: (T3->R3), t: T3) -> R3 {
    return f(t);
}

static forEach <T4,R4> (l: List<T4>, f: (T4->R4)) {
    i:int32 = 0;
    while i<l.size() {
        f(l.elements()[i]);
        i = i+1;
    }
}

static printInt(l: int64) {
    IO.print(Strings.intToString(l));
}

export static main() {
    list := List<int64>.create();
    i:int32 = 0;
    while i<=12 {
        list.add(i);
        i = i+1;
    }
    IO.print("1:");
    Test.forEach(list, printInt**);
    IO.print("\n2:");
    forEach(doNothing(list), doNothing(printInt**));
    IO.print("\n3:");
    asdf : (List<int64>, (int64->()) -> ()) = forEach**;
    call(asdf, list, printInt**);
    IO.print("\n4:");
    call(forEach**, list, printInt**);
    IO.print("\n5:");
    call(forEach**, doNothing(list), doNothing(printInt**)); // TODO originally had a do nothing around forEach**, but that is currently not supported!
    //doNothing(doNothing**); this is invalid
    call(call2**, IO.print**([char]), "\ndone");
}